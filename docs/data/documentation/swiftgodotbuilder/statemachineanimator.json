{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/swiftgodotbuilder\/statemachineanimator"]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"type":"text","text":"Wires a "},{"code":"StateMachine","type":"codeVoice"},{"type":"text","text":" to an "},{"code":"AnimatedSprite2D","type":"codeVoice"},{"type":"text","text":" using "},{"identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules","type":"reference","isActive":true},{"type":"text","text":"."}],"primaryContentSections":[{"declarations":[{"tokens":[{"kind":"keyword","text":"final"},{"kind":"text","text":" "},{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"StateMachineAnimator"}],"languages":["swift"],"platforms":["macOS"]}],"kind":"declarations"},{"content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"type":"paragraph","inlineContent":[{"text":"The stateAnimator:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Plays the mapped clip whenever the ","type":"text"},{"type":"strong","inlineContent":[{"text":"gameplay state","type":"text"}]},{"text":" changes.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Listens for "},{"type":"codeVoice","code":"animationFinished"},{"type":"text","text":" and, if a rule exists, "},{"type":"strong","inlineContent":[{"text":"transitions","type":"text"}]},{"type":"text","text":" the state"},{"type":"text","text":" "},{"type":"text","text":"machine to the configured next state."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This keeps the animation policy "},{"inlineContent":[{"text":"outside","type":"text"}],"type":"strong"},{"type":"text","text":" of gameplay logic and avoids direct"},{"type":"text","text":" "},{"type":"text","text":"calls to "},{"code":"sprite.play(...)","type":"codeVoice"},{"type":"text","text":" inside your states."}]},{"style":"important","type":"aside","content":[{"inlineContent":[{"type":"text","text":""},{"code":"sprite","type":"codeVoice"},{"type":"text","text":" is held "},{"code":"unowned","type":"codeVoice"},{"type":"text","text":"; it "},{"type":"strong","inlineContent":[{"text":"must","type":"text"}]},{"type":"text","text":" outlive the stateAnimator."}],"type":"paragraph"}],"name":"Important"},{"style":"important","name":"Important","content":[{"type":"paragraph","inlineContent":[{"text":"This assigns ","type":"text"},{"code":"machine.onChange","type":"codeVoice"},{"text":" (overwriting any previous value).","type":"text"},{"text":" ","type":"text"},{"text":"Chain your own handler if you need both:","type":"text"}]},{"code":["let prev = machine.onChange","machine.onChange = { from, to in prev?(from, to); \/* stateAnimator logic *\/ }"],"type":"codeListing","syntax":"swift"}],"type":"aside"},{"level":3,"anchor":"Usage","text":"Usage","type":"heading"},{"type":"codeListing","syntax":"swift","code":["let rules = AnimationStateRules {","  When(\"Idle\", play: \"idle\")","  When(\"Hurt\", play: \"hurt\", loop: false)","  OnFinish(\"hurt\", go: \"Idle\")","}","","let stateAnimator = StateMachineAnimator(machine: machine, sprite: sprite, rules: rules)","stateAnimator.active()"]}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator"},"metadata":{"role":"symbol","modules":[{"name":"SwiftGodotBuilder"}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"StateMachineAnimator"}],"symbolKind":"class","externalID":"s:17SwiftGodotBuilder20StateMachineAnimatorC","roleHeading":"Class","navigatorTitle":[{"text":"StateMachineAnimator","kind":"identifier"}],"title":"StateMachineAnimator"},"kind":"symbol","sections":[],"hierarchy":{"paths":[["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder"]]},"topicSections":[{"identifiers":["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/init(machine:sprite:rules:)"],"generated":true,"anchor":"Initializers","title":"Initializers"},{"identifiers":["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/activate()"],"generated":true,"anchor":"Instance-Methods","title":"Instance Methods"}],"references":{"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder":{"url":"\/documentation\/swiftgodotbuilder","role":"collection","type":"topic","kind":"symbol","abstract":[],"identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder","title":"SwiftGodotBuilder"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/AnimationStateRules":{"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"AnimationStateRules"}],"abstract":[{"type":"text","text":"A declarative mapping between "},{"type":"strong","inlineContent":[{"type":"text","text":"gameplay states"}]},{"type":"text","text":" and "},{"type":"strong","inlineContent":[{"type":"text","text":"animation clips"}]},{"type":"text","text":", with"},{"type":"text","text":" "},{"type":"text","text":"optional reverse rules that transition the state machine when an animation finishes."}],"type":"topic","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules","kind":"symbol","url":"\/documentation\/swiftgodotbuilder\/animationstaterules","title":"AnimationStateRules","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AnimationStateRules"}]},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator":{"abstract":[{"text":"Wires a ","type":"text"},{"code":"StateMachine","type":"codeVoice"},{"text":" to an ","type":"text"},{"code":"AnimatedSprite2D","type":"codeVoice"},{"text":" using ","type":"text"},{"identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules","isActive":true,"type":"reference"},{"text":".","type":"text"}],"identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator","type":"topic","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"StateMachineAnimator"}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"StateMachineAnimator"}],"kind":"symbol","url":"\/documentation\/swiftgodotbuilder\/statemachineanimator","title":"StateMachineAnimator"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator/activate()":{"title":"activate()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"activate"},{"kind":"text","text":"()"}],"url":"\/documentation\/swiftgodotbuilder\/statemachineanimator\/activate()","type":"topic","role":"symbol","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/activate()","abstract":[{"type":"text","text":"Connects the stateAnimator:"}],"kind":"symbol"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator/init(machine:sprite:rules:)":{"role":"symbol","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"machine"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"StateMachine","preciseIdentifier":"s:17SwiftGodotBuilder12StateMachineC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"sprite"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AnimatedSprite2D","preciseIdentifier":"s:10SwiftGodot16AnimatedSprite2DC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"rules"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AnimationStateRules","preciseIdentifier":"s:17SwiftGodotBuilder19AnimationStateRulesV"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Creates a stateAnimator."}],"title":"init(machine:sprite:rules:)","type":"topic","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/init(machine:sprite:rules:)","url":"\/documentation\/swiftgodotbuilder\/statemachineanimator\/init(machine:sprite:rules:)","kind":"symbol"}}}