{"identifier":{"url":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator","interfaceLanguage":"swift"},"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"text":"Wires a ","type":"text"},{"type":"codeVoice","code":"StateMachine"},{"text":" to an ","type":"text"},{"type":"codeVoice","code":"AnimatedSprite2D"},{"text":" using ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules"},{"text":".","type":"text"}],"kind":"symbol","metadata":{"roleHeading":"Class","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StateMachineAnimator","kind":"identifier"}],"externalID":"s:17SwiftGodotBuilder20StateMachineAnimatorC","navigatorTitle":[{"text":"StateMachineAnimator","kind":"identifier"}],"modules":[{"name":"SwiftGodotBuilder"}],"role":"symbol","symbolKind":"class","title":"StateMachineAnimator"},"topicSections":[{"generated":true,"anchor":"Initializers","title":"Initializers","identifiers":["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/init(machine:sprite:rules:)"]},{"generated":true,"anchor":"Instance-Methods","title":"Instance Methods","identifiers":["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/activate()"]}],"primaryContentSections":[{"declarations":[{"tokens":[{"text":"final","kind":"keyword"},{"text":" ","kind":"text"},{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StateMachineAnimator","kind":"identifier"}],"languages":["swift"],"platforms":["macOS"]}],"kind":"declarations"},{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The stateAnimator:"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Plays the mapped clip whenever the "},{"type":"strong","inlineContent":[{"type":"text","text":"gameplay state"}]},{"type":"text","text":" changes."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Listens for "},{"type":"codeVoice","code":"animationFinished"},{"type":"text","text":" and, if a rule exists, "},{"type":"strong","inlineContent":[{"text":"transitions","type":"text"}]},{"type":"text","text":" the state"},{"type":"text","text":" "},{"type":"text","text":"machine to the configured next state."}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"text":"This keeps the animation policy ","type":"text"},{"inlineContent":[{"text":"outside","type":"text"}],"type":"strong"},{"text":" of gameplay logic and avoids direct","type":"text"},{"text":" ","type":"text"},{"text":"calls to ","type":"text"},{"code":"sprite.play(...)","type":"codeVoice"},{"text":" inside your states.","type":"text"}],"type":"paragraph"},{"style":"important","name":"Important","content":[{"inlineContent":[{"type":"text","text":""},{"type":"codeVoice","code":"sprite"},{"type":"text","text":" is held "},{"type":"codeVoice","code":"unowned"},{"type":"text","text":"; it "},{"type":"strong","inlineContent":[{"type":"text","text":"must"}]},{"type":"text","text":" outlive the stateAnimator."}],"type":"paragraph"}],"type":"aside"},{"style":"important","name":"Important","content":[{"inlineContent":[{"type":"text","text":"This assigns "},{"code":"machine.onChange","type":"codeVoice"},{"type":"text","text":" (overwriting any previous value)."},{"type":"text","text":" "},{"type":"text","text":"Chain your own handler if you need both:"}],"type":"paragraph"},{"code":["let prev = machine.onChange","machine.onChange = { from, to in prev?(from, to); \/* stateAnimator logic *\/ }"],"syntax":"swift","type":"codeListing"}],"type":"aside"},{"level":3,"text":"Usage","anchor":"Usage","type":"heading"},{"type":"codeListing","syntax":"swift","code":["let rules = AnimationStateRules {","  When(\"Idle\", play: \"idle\")","  When(\"Hurt\", play: \"hurt\", loop: false)","  OnFinish(\"hurt\", go: \"Idle\")","}","","let stateAnimator = StateMachineAnimator(machine: machine, sprite: sprite, rules: rules)","stateAnimator.active()"]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder"]]},"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/swiftgodotbuilder\/statemachineanimator"]}],"references":{"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/AnimationStateRules":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AnimationStateRules","kind":"identifier"}],"navigatorTitle":[{"text":"AnimationStateRules","kind":"identifier"}],"abstract":[{"type":"text","text":"A declarative mapping between "},{"inlineContent":[{"text":"gameplay states","type":"text"}],"type":"strong"},{"type":"text","text":" and "},{"inlineContent":[{"type":"text","text":"animation clips"}],"type":"strong"},{"type":"text","text":", with"},{"type":"text","text":" "},{"type":"text","text":"optional reverse rules that transition the state machine when an animation finishes."}],"type":"topic","role":"symbol","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules","url":"\/documentation\/swiftgodotbuilder\/animationstaterules","kind":"symbol","title":"AnimationStateRules"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator":{"abstract":[{"type":"text","text":"Wires a "},{"type":"codeVoice","code":"StateMachine"},{"type":"text","text":" to an "},{"type":"codeVoice","code":"AnimatedSprite2D"},{"type":"text","text":" using "},{"type":"reference","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/AnimationStateRules","isActive":true},{"type":"text","text":"."}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StateMachineAnimator","kind":"identifier"}],"navigatorTitle":[{"text":"StateMachineAnimator","kind":"identifier"}],"type":"topic","role":"symbol","url":"\/documentation\/swiftgodotbuilder\/statemachineanimator","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator","kind":"symbol","title":"StateMachineAnimator"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator/activate()":{"role":"symbol","kind":"symbol","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/activate()","abstract":[{"text":"Connects the stateAnimator:","type":"text"}],"url":"\/documentation\/swiftgodotbuilder\/statemachineanimator\/activate()","type":"topic","title":"activate()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"activate","kind":"identifier"},{"text":"()","kind":"text"}]},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder":{"identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder","url":"\/documentation\/swiftgodotbuilder","title":"SwiftGodotBuilder","type":"topic","role":"collection","abstract":[],"kind":"symbol"},"doc://SwiftGodotBuilder/documentation/SwiftGodotBuilder/StateMachineAnimator/init(machine:sprite:rules:)":{"fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"machine"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"StateMachine","preciseIdentifier":"s:17SwiftGodotBuilder12StateMachineC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"sprite"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AnimatedSprite2D","preciseIdentifier":"s:10SwiftGodot16AnimatedSprite2DC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"rules"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"AnimationStateRules","preciseIdentifier":"s:17SwiftGodotBuilder19AnimationStateRulesV"},{"kind":"text","text":")"}],"title":"init(machine:sprite:rules:)","url":"\/documentation\/swiftgodotbuilder\/statemachineanimator\/init(machine:sprite:rules:)","kind":"symbol","type":"topic","role":"symbol","identifier":"doc:\/\/SwiftGodotBuilder\/documentation\/SwiftGodotBuilder\/StateMachineAnimator\/init(machine:sprite:rules:)","abstract":[{"type":"text","text":"Creates a stateAnimator."}]}}}